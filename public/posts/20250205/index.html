<!DOCTYPE html>
<html lang="ja-jp" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>ブログ制作記 #2 | 技術ブログ</title>

    <link rel="stylesheet" href="/css/main.css">


      <script src="/js/main.js"></script>


</head>
<body>
  <header>
    <h1>技術ブログ</h1>

  <nav>
    <ul>
    <li>
      <a href="/">Home</a>
    </li>
    <li>
      <a aria-current="true" class="ancestor" href="/posts/">Posts</a>
    </li>
    <li>
      <a href="/tags/">Tags</a>
    </li>
    <li>
      <a href="/about/">About</a>
    </li>
    </ul>
  </nav>


  </header>
  <main>
    
  <h1>ブログ制作記 #2</h1>

  
  
  <p>投稿日
    <time datetime="2025-02-05T21:00:16&#43;09:00">2025/02/05</time>
    
    <br>
    
  <span>
    <span>Tags:
        <a href="/tags/hugo/">Hugo</a>, 
        <a href="/tags/web/">Web</a>
    </span>
  </span>

  </p>

  <p>引き続きブログの改善に臨みます。</p>
<h2 id="aboutページの制作">Aboutページの制作</h2>
<p>デフォルトの状態ではAboutがないのでAboutのページを作ります。</p>
<p>テンプレートの<code>hugo.toml</code>に以下を追記します。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[[<span style="color:#a6e22e">menus</span>.<span style="color:#a6e22e">main</span>]]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#39;About&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">pageRef</span> = <span style="color:#e6db74">&#39;/about&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">40</span>
</span></span></code></pre></div><p>そして、<code>content/about/_index.md</code>にAboutの内容を書き込んでいきます。</p>
<p>ここで、アイコン画像を並べるために要素を横並びで表示するshortcodeを書いてみました。引数に<code>class</code>があればそちらを優先するようにしたのですが、その場合gridではなくなるので微妙な実装かもしれません。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{ if .Get &#34;class&#34; }}
</span></span><span style="display:flex;"><span>    {{ $class = .Get &#34;class&#34; }}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ $class }}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    {{ .Inner }}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{{ else }}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; flex-wrap: wrap;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        {{ .Inner }}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{{ end }}
</span></span></code></pre></div><p>これは備忘録的に書いておくのですが、マークダウンから引数でCSSを受け取ってそれをstyleに代入する際は、<code>style=&quot;{{ .Get &quot;style&quot; | safeCSS }}&quot;</code>のように<a href="https://gohugo.io/functions/safe/css/">safeCSS</a>にパイプしないとこの部分が<code>ZgotmplZ</code>となってしまいます。</p>
<p>不正なインジェクションを防ぐためのGoの仕様らしいです。あまり多様するのはよくなさそうなのでいったんやめました。</p>
<h2 id="中央に寄せる">中央に寄せる</h2>
<p>現状だと全てのページが左に寄っています。スマホやタブレットで見る分には問題ないですが、PCで見ると明らかに左に寄っていて見ずらいです。</p>
<p>なのでCSS(テンプレートの<code>assets/css/main.css</code>)に以下を追記してページ全体を中央に寄せました。余白を付けるのも忘れずに</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#f92672">html</span><span style="color:#f92672">,</span> <span style="color:#f92672">body</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">margin</span>: <span style="color:#66d9ef">auto</span>; <span style="color:#75715e">/* 横の中央揃え */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">justify-content</span>: <span style="color:#66d9ef">center</span>; <span style="color:#75715e">/* 水平方向の中央揃え */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>; <span style="color:#75715e">/* 余白 */</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="タグを上にもってくる">タグを上にもってくる</h2>
<p>現状ではこんな感じで下に記事のタグが置かれていますが、上にあったほうがいいと思ったので上にもっていきます。</p>
<figure><img src="/posts/20250205/20250205.png"
    alt="現状のタグの表示">
</figure>

<p><code>layouts/_default/single.html</code>をこんな感じにして<code>layouts/partials/terms.html</code>がコンテンツの上に置かれるようにします。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{ define &#34;main&#34; }}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">h1</span>&gt;{{ .Title }}&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  {{ $dateMachine := .Date | time.Format &#34;2006-01-02T15:04:05-07:00&#34; }}
</span></span><span style="display:flex;"><span>  {{ $dateHuman := .Date | time.Format &#34;2006/01/02&#34; }}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">p</span>&gt;投稿日
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">time</span> <span style="color:#a6e22e">datetime</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ $dateMachine }}&#34;</span>&gt;{{ $dateHuman }}&lt;/<span style="color:#f92672">time</span>&gt;
</span></span><span style="display:flex;"><span>    {{ if ne .Lastmod .Date }}
</span></span><span style="display:flex;"><span>      {{ $updateDate := .Lastmod | time.Format &#34;2006/01/02&#34; }}
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">br</span>&gt;
</span></span><span style="display:flex;"><span>      (最終更新:&lt;<span style="color:#f92672">time</span> <span style="color:#a6e22e">datetime</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ $dateMachine }}&#34;</span>&gt;{{ $updateDate }}&lt;/<span style="color:#f92672">time</span>&gt;)
</span></span><span style="display:flex;"><span>    {{ end }}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">br</span>&gt;
</span></span><span style="display:flex;"><span>    {{ partial &#34;terms.html&#34; (dict &#34;taxonomy&#34; &#34;tags&#34; &#34;page&#34; .) }}
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  {{ .Content }}
</span></span><span style="display:flex;"><span>{{ end }}
</span></span></code></pre></div><p>Web初心者なので初めて知りましたが、pタグの中にdivタグを置くと勝手に外に出てしまうんですね。<code>terms.html</code>が中でdivタグを使っていたのでspanタグに変更しました。</p>
<p>ついでに、タグの表示方法も変えてみました。カンマ区切りでタグを横に並べています。(最後のタグの後にカンマを置かないようにするの、もっといい実装ないですかね？)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{- $page := .page }}
</span></span><span style="display:flex;"><span>{{- $taxonomy := .taxonomy }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{- with $page.GetTerms $taxonomy }}
</span></span><span style="display:flex;"><span>  {{- $label := (index . 0).Parent.LinkTitle }}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">span</span>&gt;{{ $label }}:
</span></span><span style="display:flex;"><span>      {{- range . }}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ .RelPermalink }}&#34;</span>&gt;{{ .LinkTitle }}&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>        {{ if ne . (index (last 1 ($page.GetTerms $taxonomy)) 0) }}, {{ end }}
</span></span><span style="display:flex;"><span>      {{- end }}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>{{- end }}
</span></span></code></pre></div><h2 id="コードブロックの改善">コードブロックの改善</h2>
<p>スマホでこのサイトを確認していたら、コードブロックが横に突き出してひどいことになっていました。たまにこうなってるサイトを見かけますが、何もしないとこうなるのか…という気持ちです。</p>
<p>これを直すには横がはみ出たときに横スクロールにするのがよさそうです。コードブロックに当たっていた<code>highlight</code>に自動でスクロールにする設定を追加します。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.<span style="color:#a6e22e">highlight</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#272822</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">overflow-x</span>: <span style="color:#66d9ef">auto</span>; <span style="color:#75715e">/* 自動でスクロールに */</span>
</span></span><span style="display:flex;"><span>  scrollbar-gutter: stable;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>hugo gen chromastyles</code>コマンド(<a href="https://gohugo.io/commands/hugo_gen_chromastyles/">ドキュメント</a>)でシンタックスハイライト用のスタイルシートを生成できるらしいのですが、何も設定しなくてもシンタックスハイライトが効いているのでひとまずはこれでいきます。</p>
<h2 id="おわりに">おわりに</h2>
<p>「おわりに」みたいなものを置かないとどこまでが本題かわかりずらいですね。</p>
<p>今回も些細な修正でしたが、また少し見た目が良くなったと思います。三日坊主にならないように続けたいものです。</p>


  </main>
  <footer>
    <p>Copyright 2025. All rights reserved.</p>

  </footer>
</body>
</html>
